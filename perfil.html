<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/css/estilo-perfil.css">
  <link rel="icon" href="assets/img/Logo.bmp" type="image/png">
  <title>Perfil do Usu√°rio</title>
</head>

<body>
  <div class="banner">
    <div class="navebar">
      <div class="logo">
        <img src="assets/img/Logo.bmp" alt="Logo" width="90px">
      </div>
      <nav>
        <ul id="menuItens">
          <li><a href="tela_principal.html">Home</a></li>
          <li><a href="produtos.html">Produtos</a></li>
          <li><a href="contatos.html">Contato</a></li>
          <li class="dropdown">
            <a href="produtos.html" class="dropbtn">Categorias &#x2228;</a>
            <ul class="dropdown-content">
              <li><a href="produtos.html?category=all">Todos</a></li>
              <li><a href="produtos.html?category=rosto">Rosto</a></li>
              <li><a href="produtos.html?category=olhos">Olhos</a></li>
              <li><a href="produtos.html?category=labios">L√°bios</a></li>
              <li><a href="produtos.html?category=acessorios">Acess√≥rios</a></li>
            </ul>
          </li>
          <li class="search-bar">
            <form action="produtos.html" method="get">
              <input type="text" name="busca" placeholder="Buscar produtos...">
            </form>
          </li>
          <li class="cart-icon">
            <a href="carrinho.html">üõí</a>
          </li>
          <!-- Bolinha de perfil -->
          <li class="profile-icon">
            <a href="perfil.html" onclick="abrirBarraLateral()">
              <img src="assets/img/default-profile.png" alt="Perfil" class="profile-img">
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <div class="perfil-container">
      <div class="perfil">
        <img id="imagemPerfil" src="assets/img/PerfilNav.png" alt="Img de Perfil">
        <div class="camera-icon" onclick="abrirSelecaoPersonagem()"></div>
      </div>

      <form>
        <div class="linha-form">
          <div class="campo">
            <label>Nome:</label>
            <span class="editar" onclick="editarCampo('nome')">&#9998;</span>
            <input type="text" id="nome" value="Alice">
          </div>

          <div class="campo">
            <label>Telefone:</label>
            <span class="editar" onclick="editarCampo('telefone')">&#9998;</span>
            <input type="text" id="telefone" value="(11) 99999-9999">
          </div>

        </div>

        <div class="linha-form">
          <div class="campo">
            <label>Email:</label>
            <span class="editar" onclick="habilitarEdicaoComConfirmacao('email')">‚úé</span>
            <input type="email" id="email" value="alice@email.com" disabled>
          </div>

          <div class="campo">
            <label>Senha:</label>
            <span class="editar" onclick="habilitarEdicaoComConfirmacao('senha')">‚úé</span>
            <input type="password" id="senha" value="********" disabled>
          </div>
        </div>

        <div class="linha-form">
          <div class="campo">
            <label>Endere√ßo:</label>
            <span class="editar" onclick="editarCampo('endereco')">&#9998;</span>
            <input type="text" id="endereco" value="Rua das Flores, 123">
          </div>

          <div class="campo">
            <label>CEP:</label>
            <span class="editar" onclick="editarCampo('cep')">&#9998;</span>
            <input type="text" id="cep" value="12345-678">
          </div>
        </div>

        <div class="linha-form">
          <!-- Novo Campo N√∫mero -->
          <div class="linha-form">
            <div class="campo">
              <label>N√∫mero:</label>
              <span class="editar" onclick="editarCampo('numero')">&#9998;</span>
              <input type="text" id="numero" value="123">
            </div>

            <div class="campo">
              <label>Cidade:</label>
              <span class="editar" onclick="editarCampo('cidade')">&#9998;</span>
              <input type="text" id="cidade" value="S√£o Paulo">
            </div>
          </div>

          <div>

            <div class="campo">
              <label>Refer√™ncias:</label>
              <span class="editar" onclick="editarCampo('referencias')">&#9998;</span>
              <input type="text" id="referencias" value="Apartamento 101">
            </div>

          </div>

      </form>


    </div>
    <button class="btn sair" onclick="confirmarSaida()">Sair</button>
  </div>

  <!-- Popup de confirma√ß√£o de sa√≠da -->
  <div id="popupSair" class="popup hidden">
    <div class="popup-content">
      <span class="close" onclick="fecharPopupSair()">&times;</span>
      <h3>Tem certeza que deseja sair?</h3>
      <button class="btn" onclick="sair()">Sim, Tchau</button>
      <button class="btn" onclick="fecharPopupSair()">N√£o, vou ficar mais um pouco</button>
    </div>
  </div>

  <!-- Seletor de personagens -->
  <div id="seletorPersonagem" class="popup hidden">
    <div class="popup-content">
      <span class="close" onclick="fecharSelecaoPersonagem()">&times;</span>
      <h3>Escolha seu personagem</h3>
      <div class="personagens">
        <img src="assets/img/personagem1.png" alt="Personagem 1"
          onclick="alterarImagemPerfil('assets/img/personagem1.png')">
        <img src="assets/img/personagem2.png" alt="Personagem 2"
          onclick="alterarImagemPerfil('assets/img/personagem2.png')">
        <img src="assets/img/personagem3.png" alt="Personagem 3"
          onclick="alterarImagemPerfil('assets/img/personagem3.png')">
        <img src="assets/img/personagem4.png" alt="Personagem 4"
          onclick="alterarImagemPerfil('assets/img/personagem4.png')">
      </div>
    </div>
  </div>


  <script>
    function editarCampo(campoId) {
      const campo = document.getElementById(campoId);
      campo.disabled = false;
      campo.focus();
    }

    function habilitarEdicaoComConfirmacao(campoId) {
      const campo = document.getElementById(campoId);
      campo.disabled = false;
      campo.focus();

      campo.addEventListener("blur", () => {
        const novoValor = campo.value;
        const confirmacao = confirm(`Deseja salvar as altera√ß√µes no campo ${campoId}?`);
        if (confirmacao) {
          const usuario = JSON.parse(localStorage.getItem("usuario")) || {};
          usuario[campoId] = novoValor;
          localStorage.setItem("usuario", JSON.stringify(usuario));
          campo.disabled = true;
        } else {
          campo.value = JSON.parse(localStorage.getItem("usuario"))[campoId] || campo.defaultValue;
          campo.disabled = true;
        }
      }, { once: true });
    }

    function confirmarSaida() {
      const confirmar = confirm("Tem certeza que deseja sair?");
      if (confirmar) {
        window.location.href = "login.html";
      }
    }

    function abrirSelecaoPersonagem() {
      document.getElementById('seletorPersonagem').classList.remove('hidden');
    }

    function fecharSelecaoPersonagem() {
      document.getElementById('seletorPersonagem').classList.add('hidden');
    }

    function alterarImagemPerfil(imagem) {
      // Atualiza a imagem no card de perfil
      document.getElementById('imagemPerfil').src = imagem;

      // Atualiza a imagem na bolinha de perfil na barra de navega√ß√£o
      document.getElementById('bolinhaPerfil').src = imagem;

      // Fecha o seletor de personagens
      fecharSelecaoPersonagem();
    }

    // Fun√ß√£o para validar o formato do telefone
    function validarTelefone(telefone) {
      const regex = /^\(\d{2}\) \d{5}-\d{4}$/;
      return regex.test(telefone);
    }

    document.getElementById('cep').addEventListener('blur', async function () {
      const cep = this.value.replace(/\D/g, '');
      const enderecoInput = document.getElementById('endereco');

      if (cep.length === 8) {
        try {
          const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
          const data = await response.json();

          if (data.erro) throw new Error("CEP inv√°lido");

          enderecoInput.value = `${data.logradouro}, ${data.bairro}, ${data.localidade} - ${data.uf}`;
        } catch {
          const ruas = ["Travessa do Batom", "Alameda da Beleza", "Rua do Iluminador"];
          const bairros = ["Centro Fashion", "Bairro MakeUp", "Vila Glam"];
          const cidades = ["Maquiagem City", "Beautytown", "Glamour√≥polis"];
          const estados = ["SP", "RJ", "BA", "MG", "RS"];

          const fakeEndereco = `${ruas[Math.floor(Math.random() * ruas.length)]}, ${bairros[Math.floor(Math.random() * bairros.length)]}, ${cidades[Math.floor(Math.random() * cidades.length)]} - ${estados[Math.floor(Math.random() * estados.length)]}`;
          enderecoInput.value = fakeEndereco;
        }
      } else {
        enderecoInput.value = "";
        alert("CEP inv√°lido (deve conter 8 d√≠gitos)");
      }
    });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const nomeUsuario = localStorage.getItem("nomeUsuario");
      if (nomeUsuario) {
        const nome = nomeUsuario.split(" ")[0];
        const profileItem = document.querySelector(".profile-icon");
        profileItem.innerHTML = `<a href="perfil.html">Ol√°, ${nome}</a>`;
      }
    });
  </script>
</body>

</html>
<!--Nome do arquivo: perfil.html
Descri√ß√£o: P√°gina de perfil da loja A&A Make.
Autor: Alice ‚ù¶Ô∏é
Data de Finaliza√ß√£o: 15/5/2025 -->